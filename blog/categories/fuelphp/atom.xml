<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: fuelphp | My Octopress Blog]]></title>
  <link href="http://kusoayan.github.com/blog/categories/fuelphp/atom.xml" rel="self"/>
  <link href="http://kusoayan.github.com/"/>
  <updated>2012-04-19T19:13:27+08:00</updated>
  <id>http://kusoayan.github.com/</id>
  <author>
    <name><![CDATA[Lazy Wei]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[FuelPHP 安裝配置（一）]]></title>
    <link href="http://kusoayan.github.com/blog/2012/04/16/fuelphp-setup/"/>
    <updated>2012-04-16T20:57:00+08:00</updated>
    <id>http://kusoayan.github.com/blog/2012/04/16/fuelphp-setup</id>
    <content type="html"><![CDATA[<p>這系列記一下 FuelPHP 的安裝配置步驟，config、orm、auth、oil 等。</p>

<!-- more -->


<p>按照官方網站上的說明，可以藉由兩種方式來安裝：</p>

<ol>
<li><p>直接透過指令安裝：
 <div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ curl get.fuelphp.com/oil | sh&lt;code></span></code></pre></td></tr></table></div></figure></notextile></div>
 這種方式目前只在 \*nix 系統（Linux、OS X、Unix、etc.）上可以使用，下了指令之後，他會自己把 oil 這個 shell-script 抓下來然後安裝到你的</code>/usr/bin` 底下，也因此過程中他會需要你的密碼來授權。裝完之後可以看一下這個 shell-script 到底幹了什麼事情；
 <div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>oil bash </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code> #!/bin/bash
</span><span class='line'>
</span><span class='line'> if [ -f "./oil" ]; then
</span><span class='line'>         php oil "$@"
</span><span class='line'> else
</span><span class='line'>
</span><span class='line'>         if [ "$1" == "create" ]; then
</span><span class='line'>
</span><span class='line'>                 if [ ! `which git` ]; then 
</span><span class='line'>                     echo "For this installer to work you'll need to install Git."
</span><span class='line'>                     echo '        http://git-scm.com/'
</span><span class='line'>                 fi
</span><span class='line'>
</span><span class='line'>                 git clone --recursive git://github.com/fuel/fuel.git "./$2"
</span><span class='line'>                 php "./$2/oil" refine install
</span><span class='line'>         else
</span><span class='line'>                 echo 'This is not a valid Fuel installation so Oil is a bit lost.'
</span><span class='line'>                 echo '        http://fuelphp.com/docs/installation/instructions.html'
</span><span class='line'>
</span><span class='line'>         fi
</span><span class='line'> fi
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p> ```</span></code></pre></td></tr></table></div></figure></notextile></div></p></li>
<li><p>手動安裝</p></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[FuelPHP json]]></title>
    <link href="http://kusoayan.github.com/blog/2012/04/16/fuelphp-json/"/>
    <updated>2012-04-16T20:57:00+08:00</updated>
    <id>http://kusoayan.github.com/blog/2012/04/16/fuelphp-json</id>
    <content type="html"><![CDATA[<p>在寫台大竹友會的竹塹周網站時，剛好有要用到 FuelPHP 的 json 回傳，
所以這邊就簡單的紀錄一下，
要在 FuelPHP 中使用 json 非常簡單，在 FuelPHP 的官方 docs 中有<a href="http://docs.fuelphp.com/general/controllers/rest.html">提到</a>，你可以建立一個 Controller 去 extends Controller_Rest，像是：
``` php
&lt;?php
class Controller_Items extends Controller_Rest
{</p>

<pre><code>public function post_list()
{
    $items = Model_Item::find('all');
    $data = array();

    $i = 0;
    foreach ($items as $item)
    {
        $data[$i]['item_id'] = $item-&gt;id;
        $data[$i]['item_name'] = $item-&gt;name;
        $data[$i++]['item_price'] = $item-&gt;price;
    }

    $this-&gt;response(array(
                'items' =&gt; $data,
                ));
}
</code></pre>

<p>}
```
這是我在竹友會網站中應用到的例子。</p>

<p>接著就可以用 http://your.domain/items/list.json 來取得 json 物件。</p>

<p>另外值得一提的是，你會發現這時候 method 的開頭並不是 action<em>，而是 post</em>，其實這表示你限定可以傳入資料的型式，你可以用的有：
* GET
* POST
* PUT
* DELETE
後面兩種是比較少用到，而且大多數瀏覽器也都不支援的！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[fuelphp - oil generate 出錯]]></title>
    <link href="http://kusoayan.github.com/blog/2012/04/16/fuelphp-oil-generate-chu-cuo/"/>
    <updated>2012-04-16T16:49:00+08:00</updated>
    <id>http://kusoayan.github.com/blog/2012/04/16/fuelphp-oil-generate-chu-cuo</id>
    <content type="html"><![CDATA[<p>今天要用 FuelPHP 的 oil 時出現了一點小錯誤，當我下指令</p>

<pre><code>oil generate model users username:varchar[50] password:string group:int email:string last_login:int login_hash:string profile_fields:text
</code></pre>

<p>時卻出現 Error 說找不到 migrations 的資料夾，上 IRC 問了之後才知道問題是出在 php.ini 中的 <code>open_basedir</code>，因為我有設定 php.ini 中的這個變數，導致 oil 沒辦法正確 resolve 資料夾。
在 IRC 上討論了半天最後解法是直接把 <code>open_basedir</code> 直接 comment 掉。</p>
]]></content>
  </entry>
  
</feed>
